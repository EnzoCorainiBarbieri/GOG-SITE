<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ game['name'] }} - Loja de Jogos</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body class="game-details-page">
    {% include 'navbar.html' %}
    
    <div class="container">
        <div class="game-details-card">
            <div class="game-image">
                <img src="{{ game['image'] }}" alt="Imagem do jogo" class="img-fluid">
            </div>
            <div class="details-text">
                <h2>{{ game['name'] }}</h2>
                <p><strong>Descrição:</strong> {{ game['description'] }}</p>
                <p class="game-price"><strong>Preço:</strong> {{ game['price'] }}</p>
                <button class="btn btn-primary add-to-cart" data-appid="{{ game[1] }}">
                    <i class="fas fa-cart-plus"></i> Adicionar ao Carrinho
                </button>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).on('click', '.add-to-cart', function () {
            const appid = $(this).data('appid');
            $.post(`/add_to_cart/${appid}`, function (data) {
                alert(data.message + ` (Total no carrinho: ${data.cart_count})`);
            }).fail(function (error) {
                alert('Erro ao adicionar o jogo ao carrinho: ' + error.responseJSON.message);
            });
        });
    </script>
</body>
</html>
